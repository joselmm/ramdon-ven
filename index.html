<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Generador aleatorio (usa tu rawShort array)</title>
  <style>
    :root{
      --bg:#0f1724; --card:#0b1220; --accent:#7dd3fc; --muted:#94a3b8;
      --glass: rgba(255,255,255,0.03);
    }
    *{box-sizing:border-box;font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;}
    body{margin:0;min-height:100vh;background:linear-gradient(180deg,#071027 0%, #07162d 100%);display:flex;align-items:center;justify-content:center;padding:24px;color:white;}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:12px; padding:20px; width:100%; max-width:820px; box-shadow:0 6px 30px rgba(2,6,23,0.6);}
    h1{margin:0 0 8px;font-size:18px;letter-spacing:0.2px}
    p.lead{margin:0 0 18px;color:var(--muted);font-size:13px}
    .address{background:var(--glass); padding:14px;border-radius:10px; display:grid; gap:10px; grid-template-columns: 1fr auto; align-items:center;}
    .field{display:flex; flex-direction:column; gap:6px; padding-right:8px;}
    .label{font-size:11px;color:var(--muted); text-transform:uppercase;}
    .value{font-size:15px; font-weight:600; color:#e6eef7; word-break:break-word;}
    button.copy{background:transparent;border:1px solid rgba(255,255,255,0.06); padding:8px 10px; border-radius:8px; cursor:pointer; color:var(--accent); min-width:92px;}
    .controls{display:flex; gap:8px; margin-top:14px; align-items:center; flex-wrap:wrap;}
    .btn-primary{background:linear-gradient(90deg,#0369a1,#0ea5a0); border:none; color:white; padding:10px 12px; border-radius:10px; cursor:pointer; font-weight:600;}
    .btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.06); color:var(--muted); padding:10px 12px;border-radius:10px; cursor:pointer;}
    .small{font-size:13px;color:var(--muted); margin-left:auto;}
    .toast{position:fixed; right:20px; bottom:20px; background:#0b1220; color:var(--accent); padding:10px 14px; border-radius:8px; box-shadow:0 6px 20px rgba(0,0,0,0.6); display:none;}
    .row{display:flex; gap:10px; align-items:center;}
    footer{margin-top:12px;font-size:12px;color:var(--muted);}
    @media (max-width:820px){ .address{grid-template-columns:1fr;} .small{display:none} }
  </style>
</head>
<body>
  <main class="card" role="main">
    <h1>Generador aleatorio (usa tu rawShort array)</h1>
    <p class="lead">Pega tu array en la constante <code>RAWSHORTS</code>. Al pulsar <strong>Nuevo</strong> se regeneran ciudad, teléfono y se selecciona 1 elemento aleatorio de tu array para mostrar/copia.</p>

    <div id="addressBox" class="address" aria-live="polite">
      <div class="field">
        <div class="label">Ciudad</div>
        <div id="city" class="value">—</div>
      </div>
      <div>
        <button class="copy" data-copy="city" title="Copiar ciudad">Copiar ciudad</button>
      </div>

      <div class="field">
        <div class="label">Estado</div>
        <div id="state" class="value">—</div>
      </div>
      <div>
        <button class="copy" data-copy="state" title="Copiar estado">Copiar estado</button>
      </div>

      <div class="field">
        <div class="label">Código Postal</div>
        <div id="zip" class="value">—</div>
      </div>
      <div>
        <button class="copy" data-copy="zip" title="Copiar ZIP">Copiar ZIP</button>
      </div>

      <div class="field">
        <div class="label">Teléfono (VE)</div>
        <div id="phone" class="value">—</div>
      </div>
      <div>
        <button class="copy" data-copy="phone" title="Copiar teléfono">Copiar teléfono</button>
      </div>

      <div class="field">
        <div class="label">BIN </div>
        <div id="rawShort" class="value">—</div>
      </div>
      <div>
        <button class="copy" data-copy="rawShort" title="Copiar rawShort">Copiar BIN</button>
      </div>
    </div>

    <div class="controls">
      <div class="row">
        <button id="newBtn" class="btn-primary" title="Generar nueva entrada">Nuevo</button>
        <button id="genPhoneBtn" class="btn-ghost" title="Generar número venezolano (solo teléfono)">Generar número</button>
        <button id="copyAll" class="btn-ghost" title="Copiar dirección completa">Copiar dirección completa</button>
      </div>
      <div class="small">Pega tu array en <code>RAWSHORTS</code> dentro del script.</div>
    </div>

    <footer>
      <strong>Nota:</strong> el muestreo aleatorio utiliza <code>crypto.getRandomValues</code>.
    </footer>
  </main>

  <div id="toast" class="toast" role="status" aria-live="polite">Copiado</div>

  <script>
    // ---------------------------
    // Pega aquí TU array de strings:
    // ejemplo: const RAWSHORTS = ["uno","dos","tres"];
    // ---------------------------
    const RAWSHORTS = [
    "696352",
    "691510",
    "688177",
    "685470",
    "684964",
    "678814",
    "663005",
    "660383",
    "635037",
    "628115",
    "601299",
    "601298",
    "601297",
    "601296",
    "601295",
    "601294",
    "601293",
    "601292",
    "601291",
    "601289",
    "601286",
    "601284",
    "601283",
    "601279",
    "601276",
    "601275",
    "601274",
    "601273",
    "601272",
    "601271",
    "601270",
    "601269",
    "601268",
    "601267",
    "601266",
    "601265",
    "601264",
    "601263",
    "601262",
    "601261",
    "601260",
    "601259",
    "601258",
    "601257",
    "601256",
    "601254",
    "601253",
    "601252",
    "601251",
    "601250",
    "601249",
    "601248",
    "601247",
    "601246",
    "601245",
    "601244",
    "601243",
    "601241",
    "601240",
    "601239",
    "601238",
    "601237",
    "601236",
    "601235",
    "601234",
    "601233",
    "601232",
    "601230",
    "601229",
    "601228",
    "601226",
    "601225",
    "601224",
    "601223",
    "601222",
    "601221",
    "601220",
    "601219",
    "601218",
    "601217",
    "601216",
    "601215",
    "601214",
    "601212",
    "601211",
    "601210",
    "601209",
    "601206",
    "601203",
    "601202",
    "601201",
    "589548",
    "580628",
    "580567",
    "578817",
    "576094",
    "567040",
    "565625",
    "565568",
    "565566",
    "564942",
    "564807",
    "564005",
    "561613",
    "560470",
    "558886",
    "558870",
    "558844",
    "558841",
    "558834",
    "558762",
    "558491",
    "556605",
    "555742",
    "555491",
    "555421",
    "555347",
    "554972",
    "554937",
    "554934",
    "554929",
    "554920",
    "554914",
    "554912",
    "554833",
    "554831",
    "554798",
    "554790",
    "554772",
    "554770",
    "554735",
    "554646",
    "554643",
    "554642",
    "554633",
    "554611",
    "554540",
    "554534",
    "554500",
    "554478",
    "554395",
    "554388",
    "554211",
    "553671",
    "553663",
    "553635",
    "553513",
    "553447",
    "553438",
    "552786",
    "552590",
    "552565",
    "552462",
    "552327",
    "552326",
    "552325",
    "552311",
    "552293",
    "552292",
    "552287",
    "552286",
    "552284",
    "552283",
    "552267",
    "552266",
    "552265",
    "550567",
    "550327",
    "549780",
    "549197",
    "549196",
    "549193",
    "549192",
    "549190",
    "549189",
    "549115",
    "548852",
    "548851",
    "548850",
    "548849",
    "548586",
    "547887",
    "547793",
    "547588",
    "547554",
    "547552",
    "547469",
    "547327",
    "547326",
    "547291",
    "547290",
    "547153",
    "547032",
    "546774",
    "546753",
    "546752",
    "546704",
    "546703",
    "546694",
    "546690",
    "546629",
    "546492",
    "546490",
    "546489",
    "546465",
    "545726",
    "545193",
    "545192",
    "545174",
    "545049",
    "545003",
    "544909",
    "544807",
    "544680",
    "544518",
    "544338",
    "544194",
    "544158",
    "543863",
    "543725",
    "543498",
    "543497",
    "542660",
    "542218",
    "542209",
    "542094",
    "542037",
    "542007",
    "541844",
    "541842",
    "541841",
    "541838",
    "541689",
    "541463",
    "541459",
    "541434",
    "541431",
    "541417",
    "541395",
    "541247",
    "541154",
    "540932",
    "540628",
    "540586",
    "540551",
    "540199",
    "540167",
    "540145",
    "540144",
    "540143",
    "540142",
    "540141",
    "540140",
    "540139",
    "540133",
    "540132",
    "540131",
    "540086",
    "540085",
    "540075",
    "540060",
    "540019",
    "540009",
    "539667",
    "539660",
    "539658",
    "539608",
    "536570",
    "536440",
    "534339",
    "533150",
    "531707",
    "531379",
    "531295",
    "531241",
    "530634",
    "530603",
    "530472",
    "530471",
    "530470",
    "530147",
    "529890",
    "528940",
    "528839",
    "528790",
    "528521",
    "528004",
    "527561",
    "527356",
    "527250",
    "527113",
    "527029",
    "526749",
    "525739",
    "525712",
    "524892",
    "524621",
    "524443",
    "524369",
    "524344",
    "524339",
    "523751",
    "523739",
    "522975",
    "522974",
    "522963",
    "522946",
    "522836",
    "522835",
    "522824",
    "522782",
    "522523",
    "522270",
    "522206",
    "521877",
    "521778",
    "521666",
    "521534",
    "521359",
    "521305",
    "521304",
    "521041",
    "520154",
    "520148",
    "520048",
    "519723",
    "519707",
    "518854",
    "518310",
    "518238",
    "518225",
    "518215",
    "518152",
    "518150",
    "518093",
    "518067",
    "518031",
    "517953",
    "517886",
    "517883",
    "517881",
    "517880",
    "517875",
    "517859",
    "517857",
    "517856",
    "517758",
    "517707",
    "517657",
    "517648",
    "516668",
    "516447",
    "515892",
    "515835",
    "515827",
    "515817",
    "515673",
    "515671",
    "515659",
    "514026",
    "512776",
    "512742",
    "512460",
    "512399",
    "512391",
    "510808",
    "507866",
    "506965",
    "504559",
    "504140",
    "503124",
    "501876",
    "499941",
    "499930",
    "499929",
    "499889",
    "496638",
    "495881",
    "494518",
    "494170",
    "493803",
    "493802",
    "493753",
    "493752",
    "492457",
    "492014",
    "492012",
    "492009",
    "492008",
    "491952",
    "491951",
    "491667",
    "491609",
    "491608",
    "491509",
    "491270",
    "490735",
    "490113",
    "490112",
    "489995",
    "488249",
    "486695",
    "486648",
    "486622",
    "486520",
    "485801",
    "481423",
    "481290",
    "479340",
    "479321",
    "479320",
    "476842",
    "476841",
    "476814",
    "476813",
    "476812",
    "476562",
    "476561",
    "476560",
    "476515",
    "476105",
    "476104",
    "476064",
    "475784",
    "475783",
    "475415",
    "474632",
    "474499",
    "474498",
    "474497",
    "474496",
    "474154",
    "473292",
    "473210",
    "473209",
    "472324",
    "467478",
    "467477",
    "467126",
    "462229",
    "459347",
    "458184",
    "458183",
    "458130",
    "458129",
    "457999",
    "457567",
    "457416",
    "457415",
    "457381",
    "457380",
    "456336",
    "456035",
    "456034",
    "456033",
    "456013",
    "456010",
    "455710",
    "455641",
    "455640",
    "455615",
    "455614",
    "455613",
    "455612",
    "455611",
    "455610",
    "455609",
    "455608",
    "454732",
    "454619",
    "454599",
    "454595",
    "454594",
    "454581",
    "454580",
    "454579",
    "454578",
    "454577",
    "454576",
    "454575",
    "454574",
    "454573",
    "454571",
    "454570",
    "454560",
    "454557",
    "454534",
    "454533",
    "454532",
    "454531",
    "454530",
    "454520",
    "454518",
    "454517",
    "454516",
    "454515",
    "454514",
    "454513",
    "454512",
    "454511",
    "454510",
    "454504",
    "454503",
    "454502",
    "454501",
    "454500",
    "454468",
    "454466",
    "454465",
    "454440",
    "454439",
    "454188",
    "454139",
    "454138",
    "454137",
    "454135",
    "454134",
    "454104",
    "454042",
    "454041",
    "453502",
    "453299",
    "453233",
    "453232",
    "453231",
    "452746",
    "451722",
    "451721",
    "451450",
    "451449",
    "451325",
    "451315",
    "450966",
    "450962",
    "450961",
    "450914",
    "450630",
    "448742",
    "448741",
    "448174",
    "446870",
    "446852",
    "446334",
    "445690",
    "444806",
    "443979",
    "441786",
    "441785",
    "441784",
    "441133",
    "441132",
    "441059",
    "441058",
    "441041",
    "441040",
    "440827",
    "439814",
    "439813",
    "439483",
    "439482",
    "439476",
    "439475",
    "438095",
    "437774",
    "434967",
    "434966",
    "434965",
    "434964",
    "434963",
    "434957",
    "434615",
    "434614",
    "433486",
    "433485",
    "433121",
    "428491",
    "427173",
    "427172",
    "427170",
    "425888",
    "425881",
    "423691",
    "423614",
    "422714",
    "422271",
    "422268",
    "422263",
    "422262",
    "422261",
    "422260",
    "422242",
    "422228",
    "422225",
    "422209",
    "422169",
    "422123",
    "422099",
    "422050",
    "422046",
    "422045",
    "422044",
    "422039",
    "421930",
    "421895",
    "421886",
    "421885",
    "421884",
    "421882",
    "421826",
    "421444",
    "421422",
    "421178",
    "421177",
    "421037",
    "421036",
    "421035",
    "421034",
    "420198",
    "415762",
    "415366",
    "415271",
    "415270",
    "415229",
    "414786",
    "414768",
    "414764",
    "414755",
    "414754",
    "414747",
    "414640",
    "411858",
    "411851",
    "411850",
    "411097",
    "411096",
    "411038",
    "411037",
    "411019",
    "411018",
    "411016",
    "409709",
    "407616",
    "407607",
    "407602",
    "407556",
    "407511",
    "407457",
    "407440",
    "407427",
    "407408",
    "407407",
    "406267",
    "406260",
    "405932",
    "405898",
    "405891",
    "405890",
    "405761",
    "404849",
    "402765",
    "402686",
    "400606",
    "379948",
    "377039",
    "377038",
    "377037",
    "377036",
    "377035",
    "377034",
    "377033",
    "377032",
    "377031",
    "377030",
    "377029",
    "377028",
    "377027",
    "377026",
    "377025",
    "377024",
    "377023",
    "377022",
    "377021",
    "377020",
    "377019",
    "377018",
    "377017",
    "377016",
    "377015",
    "377014",
    "377013",
    "377012",
    "377011",
    "377010",
    "377009",
    "377008",
    "377007",
    "377006",
    "377005",
    "377004",
    "377003",
    "377002",
    "377001",
    "377000",
    "371590",
    "370400",
    "370245",
    "370244",
    "370243",
    "369653",
    "364479",
    "364478",
    "364436",
    "364435",
    "364434",
    "364433",
    "364432",
    "364431",
    "364430",
    "364424",
    "364423",
    "364422",
    "364421",
    "364420",
    "364267",
    "364266",
    "364265",
    "364264",
    "364263",
    "364262",
    "364196",
    "364169",
    "364168",
    "364146",
    "364144",
    "364140",
    "364112",
    "362842",
    "362569",
    "361420",
    "361337",
    "361336",
    "361335",
    "361334",
    "361333",
    "349820",
    "348358",
    "348234",
    "344644",
    "342450",
    "302499",
    "301763"
];
    // ---------------------------

    // --- Datos de ciudades (pega tu JSON si quieres) ---
    const ciudades = [
  {"city":"Caracas","state":"Distrito Capital","zip":"1010"},
  {"city":"Maracaibo","state":"Zulia","zip":"4004"},
  {"city":"Valencia","state":"Carabobo","zip":"2001"},
  {"city":"Barquisimeto","state":"Lara","zip":"3001"},
  {"city":"Maracay","state":"Aragua","zip":"2101"},
  {"city":"Ciudad Guayana","state":"Bolívar","zip":"8050"},
  {"city":"Maturín","state":"Monagas","zip":"6201"},
  {"city":"San Cristóbal","state":"Táchira","zip":"5001"},
  {"city":"Barinas","state":"Barinas","zip":"5201"},
  {"city":"Ciudad Bolívar","state":"Bolívar","zip":"8001"},
  {"city":"Barcelona","state":"Anzoátegui","zip":"6001"},
  {"city":"Cumaná","state":"Sucre","zip":"6101"},
  {"city":"Punto Fijo","state":"Falcón","zip":"4102"},
  {"city":"Cabimas","state":"Zulia","zip":"4013"},
  {"city":"Mérida","state":"Mérida","zip":"5115"},
  {"city":"Puerto La Cruz","state":"Anzoátegui","zip":"6023"},
  {"city":"Guatire","state":"Miranda","zip":"1221"},
  {"city":"Ciudad Ojeda","state":"Zulia","zip":"4019"},
  {"city":"Coro","state":"Falcón","zip":"4101"},
  {"city":"Turmero","state":"Aragua","zip":"2115"},
  {"city":"Los Teques","state":"Miranda","zip":"1201"},
  {"city":"Guanare","state":"Portuguesa","zip":"3350"},
  {"city":"San Felipe","state":"Yaracuy","zip":"3201"},
  {"city":"Acarigua","state":"Portuguesa","zip":"3301"},
  {"city":"Carora","state":"Lara","zip":"3050"},
  {"city":"El Tigre","state":"Anzoátegui","zip":"6050"},
  {"city":"Guarenas","state":"Miranda","zip":"1220"},
  {"city":"Cabudare","state":"Lara","zip":"3023"},
  {"city":"Carúpano","state":"Sucre","zip":"6150"},
  {"city":"San Fernando de Apure","state":"Apure","zip":"7001"},
  {"city":"Guacara","state":"Carabobo","zip":"2016"},
  {"city":"Puerto Cabello","state":"Carabobo","zip":"2050"},
  {"city":"El Tocuyo","state":"Lara","zip":"3018"},
  {"city":"Valera","state":"Trujillo","zip":"3101"},
  {"city":"La Victoria","state":"Aragua","zip":"2121"},
  {"city":"Santa Rita","state":"Aragua","zip":"2106"},
  {"city":"Güigüe","state":"Carabobo","zip":"2010"},
  {"city":"Anaco","state":"Anzoátegui","zip":"6003"},
  {"city":"Calabozo","state":"Guárico","zip":"2312"},
  {"city":"Quíbor","state":"Lara","zip":"3061"}
]
;

    // --- Utilidades ---
    function secureRandomInt(max) {
      if (max <= 0) return 0;
      const uint32Max = 2 ** 32;
      const limit = Math.floor(uint32Max / max) * max;
      const arr = new Uint32Array(1);
      while (true) {
        crypto.getRandomValues(arr);
        const r = arr[0];
        if (r < limit) return r % max;
      }
    }

    function pickRandomFrom(arr) {
      if (!Array.isArray(arr) || arr.length === 0) return null;
      return arr[secureRandomInt(arr.length)];
    }

    // Selección ciudad y phone
    function pickRandomCity() {
      return pickRandomFrom(ciudades);
    }
    function generateVenezuelanPhone() {
      const prefixes = ["412","414","416","424","426"];
      const prefix = pickRandomFrom(prefixes);
      let subscriber = "";
      for (let i = 0; i < 7; i++) subscriber += String(secureRandomInt(10));
      return `+58 ${prefix} ${subscriber}`;
    }

    // Render
    function renderCity(obj) {
      document.getElementById('city').textContent = obj ? obj.city : '—';
      document.getElementById('state').textContent = obj ? obj.state : '—';
      document.getElementById('zip').textContent = obj ? obj.zip : '—';
    }
    function renderPhone(phone) {
      document.getElementById('phone').textContent = phone || '—';
    }
    function renderRawShort(rs) {
      document.getElementById('rawShort').textContent = rs || '—';
    }

    // Copiar
    async function copyText(text) {
      try {
        if (!text) {
          showToast('Nada para copiar');
          return;
        }
        if (navigator.clipboard && navigator.clipboard.writeText) {
          await navigator.clipboard.writeText(text);
        } else {
          const ta = document.createElement('textarea');
          ta.value = text;
          ta.style.position = 'fixed';
          ta.style.left = '-9999px';
          document.body.appendChild(ta);
          ta.focus();
          ta.select();
          document.execCommand('copy');
          document.body.removeChild(ta);
        }
        showToast('Copiado');
      } catch (err) {
        showToast('Error al copiar');
        console.error(err);
      }
    }

    // Toast
    let toastTimeout = null;
    function showToast(msg) {
      const t = document.getElementById('toast');
      t.textContent = msg;
      t.style.display = 'block';
      clearTimeout(toastTimeout);
      toastTimeout = setTimeout(() => t.style.display = 'none', 1500);
    }

    // Estado actual
    let current = pickRandomCity();
    let currentPhone = generateVenezuelanPhone();
    let currentRawShort = pickRandomFrom(RAWSHORTS);

    // Inicial render
    renderCity(current);
    renderPhone(currentPhone);
    renderRawShort(currentRawShort);

    // Eventos
    document.getElementById('newBtn').addEventListener('click', () => {
      current = pickRandomCity();
      currentPhone = generateVenezuelanPhone();
      currentRawShort = pickRandomFrom(RAWSHORTS);
      renderCity(current);
      renderPhone(currentPhone);
      renderRawShort(currentRawShort);
    });

    document.getElementById('genPhoneBtn').addEventListener('click', () => {
      currentPhone = generateVenezuelanPhone();
      renderPhone(currentPhone);
    });

    document.querySelectorAll('button.copy').forEach(btn => {
      btn.addEventListener('click', (e) => {
        const prop = e.currentTarget.getAttribute('data-copy');
        if (prop === 'phone') copyText(currentPhone);
        else if (prop === 'rawShort') copyText(currentRawShort);
        else copyText(current[prop]);
      });
    });

    document.getElementById('copyAll').addEventListener('click', () => {
      const full = `Av. Ejemplo, Edif. Falso, Piso ${secureRandomInt(10)+1}, Apto. ${secureRandomInt(20)+1}${String.fromCharCode(65 + secureRandomInt(4))}
Urbanización Ficticia
${current.city}, ${current.state}
Código Postal: ${current.zip}
Tel: ${currentPhone}
rawShort: ${currentRawShort}`;
      copyText(full);
    });

    // Click directo en valor para copiar
    ['city','state','zip','phone','rawShort'].forEach(id => {
      document.getElementById(id).addEventListener('click', () => {
        if (id === 'phone') copyText(currentPhone);
        else if (id === 'rawShort') copyText(currentRawShort);
        else copyText(document.getElementById(id).textContent);
      });
    });
  </script>
</body>
</html>
